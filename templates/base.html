<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠ Ø§Ù„ØµØºÙŠØ±{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    {% block extra_head %}{% endblock %}
</head>
<body>
    <nav class="navbar">
        <span class="nav-brand">ğŸ“š Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠ Ø§Ù„ØµØºÙŠØ±</span>
        <div class="nav-links">
            <a href="{{ url_for('index') }}">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="{{ url_for('leaderboard') }}">ğŸ† Ø§Ù„Ù…ØªØµØ¯Ø±ÙˆÙ†</a>
            <a href="{{ url_for('space') }}">ğŸš€ Ù„Ø¹Ø¨Ø© Ø§Ù„ÙØ¶Ø§Ø¡</a>

        </div>
    </nav>

    <main class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for cat, msg in messages %}
                    <div class="alert alert-{{ cat }}">{{ msg }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    <footer class="footer">
        <p>Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠ Ø§Ù„ØµØºÙŠØ± - Ù„Ø¹Ø¨Ø© ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ù†Ø­Ùˆ Ø§Ù„Ø¹Ø±Ø¨ÙŠ &copy; 2025</p>
    </footer>

    <div id="cheat-toast" style="
        display:none; position:fixed; bottom:30px; left:50%; transform:translateX(-50%);
        background:#2c5530; color:#fff; padding:14px 28px; border-radius:12px;
        font-size:1rem; font-weight:bold; z-index:9999; box-shadow:0 4px 20px rgba(0,0,0,0.3);
    "></div>

    <script>
    (function() {
        const CODES = {
            'SPACE2': { level: 2, msg: 'ğŸ”“ ØªÙ… ÙØªØ­ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù†ÙŠ!' },
            'SPACE3': { level: 3, msg: 'ğŸ”“ ØªÙ… ÙØªØ­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª!' },
            'RESET1': { level: 0, msg: 'ğŸ”’ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù„Ø¹Ø¨Ø©!' },
        };
        let typed = '';
        document.addEventListener('keydown', function(e) {
            // Only track letter/number keys, ignore Enter, Shift, etc.
            if (e.key.length === 1) typed += e.key.toUpperCase();
            if (typed.length > 6) typed = typed.slice(-6);
            for (const [code, data] of Object.entries(CODES)) {
                if (typed.endsWith(code)) {
                    fetch('/cheat/' + data.level)
                        .then(r => r.json())
                        .then(res => {
                            const toast = document.getElementById('cheat-toast');
                            toast.textContent = res.ok ? data.msg : 'âŒ Ø§Ù„ÙƒÙˆØ¯ Ù„Ø§ ÙŠØ¹Ù…Ù„ Ù‡Ù†Ø§';
                            toast.style.display = 'block';
                            setTimeout(() => { toast.style.display = 'none'; }, 3000);
                        });
                    typed = '';
                }
            }
        });
    })();
    </script>
</body>
</html>
